
## Тестовое задание:
1. Для управления драйвером шагового двигателем необходимо сгенерировать STEP сигнал, который представляет из себя меандр с изменяющейся частотой и строго определённым количеством периодов.
2. Задача написать интерфейс и реализацию класса для выполнения этой задачи.
```
struct Packet{
uint8_t n;
uint16_t freq; // 100Hz - 20'000 Hz
};
```
У интерфейса должны быть методы для установки сигнала в виде `std::span<Packet>`, запуска генерации, остановки генерации, определения текущего состояния (идёт генерация или нет).
Также должен быть метод возвращающий максимальный поддерживаемый размер генерируемого сигнала.
Для упрощения структура сигнала представляет массив с количеством импульсов и их частотой.

3. Максимальный размер массива сигнала можно ограничить 10 элементами.
4. Между пачками меандров разной частоты не должно быть дополнительных задержек.
5. Сгенерировать меандр необходимо **аппаратно** на выходе PA8 МК.
6. При запуске генератора с такими параметрами:
```
std::array<Packet,3> signal{{{2, 1000},{3, 500},{2, 2000}}};
generator.add(signal);
generator.start();
```
На выходе должен получиться меандр с общим количеством импульсов 7 штук, где сперва идут 2 с частотой 1000 Гц, затем 3 с частотой 500 Гц и 2 с частотой 2000 Гц.

7. Если невозможно сгенерировать определённую частоту, то берётся ближайшая поддерживаемая.

## Решение задания:
1. Задача решена через использование таймера **TIM1**, выход первого канала которого расположен на требуемой ножке **PA8**. Таймер используется в *OnePulse* режиме для генерации импульсов.
2. Написан интерфейс в `code/Interfaces/ISquareGenerator.hpp` со всеми заданными методами. Класс с реализацией расположен в `code/Drivers/SquareGenerator.hpp`.
3. Все требования соблюдены. Пример использования можно наблюдать в `main.cpp`
4. При написании реализации для упрощения использован паттерн *Singletone*, ограничивающий количество возможных объектов класса до одного и только с использованием преднастроенного *TIM1*. При необходимости без большого труда можно скорректировать данную реализацию для использования нескольких генераторов с разными таймерами МК, передавая требуемый таймер как агрумент в конструктор и ограничивая создание нового экземпляра с повторным использованием таймера.
5. Настройка таймера преведена в `*.ioc` файле и в `cube/Src/tim.c` для таймера *TIM1*.

Новиков Александр
novikovalexander98yahoo.com